<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregnancy Week & Day Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .calendar-grid {
            grid-template-columns: repeat(7, minmax(0, 1fr));
        }
        .day-cell {
            transition: all 0.2s ease-in-out;
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Pregnancy Tracker</h1>
                <p class="text-gray-500 mt-2">Track your pregnancy journey, one day at a time.</p>
            </div>

            <div id="calendar-container" class="mt-6"></div>
        </div>
        <footer class="text-center mt-8 text-gray-500 text-sm">
            <p>&copy; 2024 Pregnancy Tracker. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        const calendarContainer = document.getElementById('calendar-container');
        const weekColors = ['bg-pink-100', 'bg-sky-100'];

        // --- HARDCODED APPOINTMENTS ---
        const APPOINTMENTS = [
            ['2026-01-16', 'å¤§æŽ’ç•¸'],
            ['2026-02-02', 'OB'],
            ['2026-03-03', 'OB'],
            ['2026-03-30', 'OB'],
            ['2026-04-21', 'OB'],
            ['2026-05-12', 'US']
        ];

        const LMP_DATE = new Date('2025-08-30T00:00:00');
        const obVisitDates = new Map(
            APPOINTMENTS.map(([d, label]) => [new Date(d + 'T00:00:00').getTime(), label])
        );

        window.addEventListener('DOMContentLoaded', () => {
            generateCalendar(LMP_DATE);
        });

        function generateCalendar(lmpDate) {
            calendarContainer.innerHTML = '';
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const estimatedDueDate = new Date(lmpDate);
            estimatedDueDate.setDate(estimatedDueDate.getDate() + 280);
            estimatedDueDate.setHours(0, 0, 0, 0);

            let currentDate = new Date(lmpDate.getFullYear(), lmpDate.getMonth(), 1);
            const finalMonthEndDate = new Date(estimatedDueDate.getFullYear(), estimatedDueDate.getMonth() + 1, 0);

            let currentMonth = -1;
            let monthContainer;

            while (currentDate <= finalMonthEndDate) {
                const month = currentDate.getMonth();
                const year = currentDate.getFullYear();
                
                if (month !== currentMonth) {
                    if (monthContainer) {
                         calendarContainer.appendChild(monthContainer);
                    }
                    currentMonth = month;
                    monthContainer = document.createElement('div');
                    monthContainer.className = 'mb-12';
                    const monthName = currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });
                    monthContainer.innerHTML = `
                        <h2 class="text-xl font-bold text-center mb-4 text-pink-600">${monthName}</h2>
                        <div class="grid calendar-grid gap-1 text-xs md:text-sm text-center font-semibold text-gray-600 mb-2">
                            <div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div><div>Sun</div>
                        </div>
                        <div class="grid calendar-grid gap-1 mt-4"></div>
                    `;
                    const firstDayOfMonth = (new Date(year, month, 1).getDay() + 6) % 7;
                    for (let i = 0; i < firstDayOfMonth; i++) {
                        monthContainer.querySelector('.calendar-grid:last-child').appendChild(document.createElement('div'));
                    }
                }
                
                const currentTs = currentDate.getTime();
                const isToday = currentTs === today.getTime();
                const isDueDate = currentTs === estimatedDueDate.getTime();
                const obVisitLabel = obVisitDates.get(currentTs);

                if (currentDate >= lmpDate && currentDate <= estimatedDueDate) {
                    const dayDiff = Math.floor((currentTs - lmpDate.getTime()) / (1000 * 3600 * 24));
                    const completedWeeks = Math.floor(dayDiff / 7);
                    const daysIntoWeek = dayDiff % 7;

                    let todayClass = isToday ? 'ring-4 ring-pink-500 ring-offset-2 z-10 is-today' : '';
                    let weekColor = weekColors[completedWeeks % 2];
                    let weekStartLabel = '';
                    let dueDateContent = '';
                    let obVisitBadge = '';

                    if (isDueDate) {
                        weekColor = 'bg-pink-500 text-white';
                        todayClass = 'ring-4 ring-pink-300 ring-offset-1';
                        dueDateContent = '<span class="absolute bottom-1 text-lg">ðŸŽ‰</span>';
                    } else {
                        if (daysIntoWeek === 0) {
                            const labelColorClass = completedWeeks % 2 === 0 ? 'text-pink-600' : 'text-sky-600';
                            weekStartLabel = `<div class="absolute top-0.5 left-0.5 ${labelColorClass} text-[8px] md:text-[10px] font-bold">Wk ${completedWeeks + 1}</div>`;
                        }
                        if (obVisitLabel) {
                            obVisitBadge = `<div class="absolute top-0 right-0 bg-purple-700 text-white text-[9px] md:text-[11px] font-bold px-1 md:px-1.5 py-0.5 rounded-bl-lg rounded-tr-lg shadow-md">${obVisitLabel}</div>`;
                            todayClass += ' ring-4 ring-purple-600 ring-offset-2 z-10';
                        }
                    }

                    const dayCell = document.createElement('div');
                    dayCell.className = `relative day-cell flex flex-col items-center justify-center h-14 md:h-16 rounded-lg ${weekColor} ${todayClass} pt-3 md:pt-4`;
                    dayCell.innerHTML = `
                        ${weekStartLabel}${obVisitBadge}
                        <span class="text-sm md:text-base font-semibold leading-tight">${currentDate.getDate()}</span>
                        <span class="text-[10px] md:text-xs ${isDueDate ? 'text-pink-100' : 'text-gray-600'} whitespace-nowrap leading-none mt-0.5">${!isDueDate ? `${completedWeeks}w${daysIntoWeek}d` : ''}</span>
                        ${dueDateContent}
                    `;
                    monthContainer.querySelector('.calendar-grid:last-child').appendChild(dayCell);
                } else {
                    const todayClass = isToday ? 'ring-2 ring-gray-400 ring-offset-1 is-today' : '';
                    const dayCell = document.createElement('div');
                    dayCell.className = `relative day-cell flex flex-col items-center justify-center h-14 md:h-16 rounded-lg bg-gray-50 text-gray-400 ${todayClass}`;
                    dayCell.innerHTML = `<span class="text-base font-semibold">${currentDate.getDate()}</span>`;
                    monthContainer.querySelector('.calendar-grid:last-child').appendChild(dayCell);
                }
                currentDate.setDate(currentDate.getDate() + 1);
            }
            if (monthContainer) calendarContainer.appendChild(monthContainer);

            const todayElement = calendarContainer.querySelector('.is-today');
            if (todayElement) {
                setTimeout(() => { todayElement.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 100);
            }
        }
    </script>
</body>
</html>
